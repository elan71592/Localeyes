<div class="container">
  <h1><%= @trip.name %></h1>
  <div id="trip-map"></div>

  <% if user_signed_in? %>
    <div><%= render 'attend_form' %></div>
  <% end %>
<br>

  <div>
    <%= render 'favorite_form' %>
  </div>

  <%= react_component( 'TripShow', { trip: @trip, locations: @trip.locations, comments: @trip.comments } ) %>

  <script>
    function initMap() {
      var map = new google.maps.Map(document.getElementById('trip-map'), {
        center: {lat: 40.712784, lng: -74.005941},
        zoom: 11,
      });

      $.ajax({
        url: window.location.href + '/locations.json'
      }).done( function( response ) {
        response.locations.map( function( location ) {
          new google.maps.Marker({
            position: { lat: location.latitude, lng: location.longitude },
            map: map,
            title: 'Hello World'
          });
        });
      });
    };
  </script>

</div>
